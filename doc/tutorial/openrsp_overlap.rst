=================
Overlap Integrals
=================
.. include:: background.rst

OpenRSP API: OpenRSPSetPDBS
===========================
.. include:: background.rst

During calculations, OpenRSP will invoke host program's callback
functions to calculate (perturbed) overlap integrals
:math:`\left\langle\tilde{\chi}_{\mu}^{a_{\mu}b_{\mu}\cdots}\left| %
\tilde{\chi}_{\nu}^{a_{\nu}b_{\nu}\cdots}\right.\right\rangle^{ab\cdots}`
and expectation values (by contracting with an array of density matrices
sent by OpenRSP), where :math:`a_{\mu}b_{\mu}\cdots`, :math:`a_{\nu}b_{\nu}\cdots`
and :math:`ab\cdots` are respectively perturbation tuples on the bra,
the ket and overlap integrals, which are generated by OpenRSP in its
recursive routine.

To send such callback functions and different perturbation labels
that can act as perturbations on the basis sets to OpenRSP, users
can call the following OpenRSP API:

.. c:function:: QErrorCode OpenRSPSetPDBS(open_rsp, num_pert, pert_labels, pert_max_orders, user_ctx, get_overlap_mat, get_overlap_exp)

.. nextslide::
   :increment:
.. include:: background.rst

This API and the callback functions (``get_overlap_mat`` and
``get_overlap_exp``) are described in OpenRSP Manual, respectively
in Chapter 3 "**OPENRSP API REFERENCE**" and Chapter 4
"**OPENRSP CALLBACK FUNCTIONS**". Users could refer to these
two chapters and OpenRSP unit testing (files in ``tests``) to
prepare their own callabck functions and to use this API.

The ``num_pert``, ``pert_labels`` and ``pert_max_orders`` in the API
:c:func:`OpenRSPSetPDBS` will be used in such a way that OpenRSP will
not invoke the callback functions if the perturbation tuples
(:math:`a_{\mu}b_{\mu}\cdots`, :math:`a_{\nu}b_{\nu}\cdots` and
:math:`ab\cdots`) result in zero overlap integrals.

